# Backlog - HumansOntology: Multilingual UI (Simplified Approach)

**–¶–µ–ª—å:** –í–µ—Å—å —Ç–µ–∫—Å—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è **—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å Dictionary**.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –°–æ–∑–¥–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã –¥–ª—è UI-—ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ui.nav.dashboard`) –∏ –∏—Ö –ø–µ—Ä–µ–≤–æ–¥—ã —Ö—Ä–∞–Ω–∏–º –≤ Dictionary. SvelteKit —á–µ—Ä–µ–∑ Houdini –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏—Ö.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (How It Works)

```
User –≤—ã–±–∏—Ä–∞–µ—Ç —è–∑—ã–∫ ‚Üí languageStore.setLanguage(languageId)
                              ‚Üì
         SvelteKit route load function (+page.ts)
                              ‚Üì
         Houdini GraphQL query –∫ Strawberry
         getDictionaries(languageId, conceptPath: "/ui/...")
                              ‚Üì
         –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: [{ concept.name: "ui.nav.dashboard", name: "Dashboard" }, ...]
                              ‚Üì
         –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: <h1>{translations['ui.nav.dashboard']}</h1>
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –º–æ–¥–µ–ª—å `Dictionary` - **–Ω–∏–∫–∞–∫–∏—Ö –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü**
‚úÖ GraphQL API —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
‚úÖ SvelteKit load functions - –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚úÖ –ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ - –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (–ë–î)

---

## üî• Implementation Plan

### Phase 1: Backend (1 week)

#### #1 - –°–æ–∑–¥–∞—Ç—å UI-–∫–æ–Ω—Ü–µ–ø—Ç—ã –≤ seed data

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `packages/backend/scripts/seed_ui_concepts.py`
- [ ] –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ü–µ–ø—Ç—ã –¥–ª—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –ø—É—Ç—è–º–∏ —Ç–∏–ø–∞ `/ui/nav/dashboard`
- [ ] –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ü–µ–ø—Ç–∞ —Å–æ–∑–¥–∞—Ç—å Dictionary –∑–∞–ø–∏—Å–∏ –¥–ª—è EN, RU, ES
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `init_db.py`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:**
```python
UI_CONCEPTS = {
    'ui.nav.dashboard': {
        'path': '/ui/nav/dashboard',
        'en': 'Dashboard',
        'ru': '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
        'es': 'Panel de control'
    },
    'ui.nav.concepts': {
        'path': '/ui/nav/concepts',
        'en': 'Concepts',
        'ru': '–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏',
        'es': 'Conceptos'
    },
    'ui.button.login': {
        'path': '/ui/button/login',
        'en': 'Login',
        'ru': '–í–æ–π—Ç–∏',
        'es': 'Iniciar sesi√≥n'
    },
    # ... ~50 –∫–ª—é—á–µ–π –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
}
```

**–ö–ª—é—á–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**

**Navigation (Header):**
- `ui.nav.dashboard`, `ui.nav.concepts`, `ui.nav.languages`, `ui.nav.dictionaries`, `ui.nav.admin`
- `ui.button.login`, `ui.button.logout`, `ui.button.register`, `ui.button.getStarted`, `ui.button.signIn`
- `ui.label.language`

**Home Page:**
- `ui.home.title`, `ui.home.subtitle`, `ui.home.description`
- `ui.home.cta.title`, `ui.home.cta.description`, `ui.home.cta.button`
- `ui.home.feature.concepts.title`, `ui.home.feature.concepts.desc`
- `ui.home.feature.multilang.title`, `ui.home.feature.multilang.desc`
- `ui.home.feature.roles.title`, `ui.home.feature.roles.desc`
- `ui.home.footer.copyright`

**Dashboard:**
- `ui.dashboard.title`, `ui.dashboard.welcome`
- `ui.dashboard.stats.users`, `ui.dashboard.stats.concepts`, `ui.dashboard.stats.languages`

**Concepts:**
- `ui.concepts.title`, `ui.concepts.create`, `ui.concepts.edit`, `ui.concepts.delete`
- `ui.concepts.search`, `ui.concepts.filter`
- `ui.concepts.table.name`, `ui.concepts.table.language`, `ui.concepts.table.actions`

**Common:**
- `ui.common.save`, `ui.common.cancel`, `ui.common.delete`, `ui.common.edit`, `ui.common.create`
- `ui.common.search`, `ui.common.filter`, `ui.common.loading`, `ui.common.error`, `ui.common.success`

**Effort:** 1 day

---

#### #2 - –î–æ–±–∞–≤–∏—Ç—å GraphQL query filter –¥–ª—è UI-–ø–µ—Ä–µ–≤–æ–¥–æ–≤ (optional)

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä `conceptPathPrefix` –≤ existing `dictionaries` query
- [ ] –ü–æ–∑–≤–æ–ª–∏—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
- [ ] –ü—Ä–∏–º–µ—Ä: `dictionaries(languageId: 1, conceptPathPrefix: "/ui/nav")` ‚Üí –≤–µ—Ä–Ω–µ—Ç –≤—Å–µ navigation –ø–µ—Ä–µ–≤–æ–¥—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `packages/backend/languages/services/dictionary_service.py`:**
```python
def get_dictionaries(
    self,
    language_id: Optional[int] = None,
    concept_path_prefix: Optional[str] = None,  # NEW
    limit: int = 100,
    offset: int = 0
) -> List[DictionaryModel]:
    query = self.db.query(DictionaryModel)

    if language_id:
        query = query.filter(DictionaryModel.language_id == language_id)

    if concept_path_prefix:  # NEW
        query = query.join(ConceptModel).filter(
            ConceptModel.path.like(f"{concept_path_prefix}%")
        )

    return query.limit(limit).offset(offset).all()
```

**–û–±–Ω–æ–≤–∏—Ç—å GraphQL schema:**
```python
@strawberry.field
def dictionaries(
    self,
    language_id: Optional[int] = None,
    concept_path_prefix: Optional[str] = None,  # NEW
    limit: int = 100,
    offset: int = 0
) -> List[DictionaryType]:
    # ...
```

**Effort:** 0.5 day (optional, –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ —ç—Ç–æ–≥–æ)

---

### Phase 2: Frontend Core (1 week)

#### #3 - –°–æ–∑–¥–∞—Ç—å utility —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–§–∞–π–ª:** `packages/frontend/src/lib/utils/i18n.ts`

```typescript
/**
 * –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
 */
export function t(
  translations: Record<string, string>,
  key: string,
  fallback?: string
): string {
  return translations[key] || fallback || key;
}

/**
 * –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤ Dictionary –≤ Map
 * Input: [{ concept: { name: "ui.nav.dashboard" }, name: "Dashboard" }, ...]
 * Output: { "ui.nav.dashboard": "Dashboard", ... }
 */
export function dictionariesToMap(dictionaries: Array<{
  concept: { name: string };
  name: string;
}>): Record<string, string> {
  return dictionaries.reduce((acc, dict) => {
    acc[dict.concept.name] = dict.name;
    return acc;
  }, {} as Record<string, string>);
}
```

**Effort:** 0.5 day

---

#### #4 - –°–æ–∑–¥–∞—Ç—å Houdini GraphQL query

**–§–∞–π–ª:** `packages/frontend/src/lib/graphql/GetUITranslations.gql`

```graphql
query GetUITranslations($languageId: Int!, $conceptPath: String) {
  dictionaries(
    languageId: $languageId
    conceptPathPrefix: $conceptPath
    limit: 500
  ) {
    concept {
      name
    }
    name
  }
}
```

–ò–ª–∏ inline –≤ –∫–æ–¥–µ:
```typescript
import { graphql } from '$houdini';

export const GetUITranslations = graphql(`
  query GetUITranslations($languageId: Int!, $conceptPath: String) {
    dictionaries(languageId: $languageId, conceptPathPrefix: $conceptPath, limit: 500) {
      concept {
        name
      }
      name
    }
  }
`);
```

**Effort:** 0.5 day

---

#### #5 - –û–±–Ω–æ–≤–∏—Ç—å +layout –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–§–∞–π–ª:** `packages/frontend/src/routes/+layout.ts`

```typescript
import { GetUITranslations } from '$houdini';
import { languageStore } from '$lib/stores/languageStore.svelte';
import { dictionariesToMap } from '$lib/utils/i18n';
import type { LayoutLoad } from './$types';

export const load: LayoutLoad = async ({ fetch }) => {
  const languageId = languageStore.currentLanguageId || 1; // fallback to English

  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è navigation/header
  const navResult = await GetUITranslations.fetch({
    variables: {
      languageId,
      conceptPath: '/ui/nav'
    },
    fetch
  });

  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã (buttons, common)
  const commonResult = await GetUITranslations.fetch({
    variables: {
      languageId,
      conceptPath: '/ui/common'
    },
    fetch
  });

  const buttonResult = await GetUITranslations.fetch({
    variables: {
      languageId,
      conceptPath: '/ui/button'
    },
    fetch
  });

  const navTranslations = dictionariesToMap(navResult.data?.dictionaries || []);
  const commonTranslations = dictionariesToMap(commonResult.data?.dictionaries || []);
  const buttonTranslations = dictionariesToMap(buttonResult.data?.dictionaries || []);

  // –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç
  const globalTranslations = {
    ...navTranslations,
    ...commonTranslations,
    ...buttonTranslations
  };

  return {
    globalTranslations
  };
};
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–ø—Ä–æ—â–µ):** –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ `/ui` –ø–µ—Ä–µ–≤–æ–¥—ã –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º:
```typescript
const result = await GetUITranslations.fetch({
  variables: {
    languageId,
    conceptPath: '/ui'  // –≤—Å–µ UI –ø–µ—Ä–µ–≤–æ–¥—ã
  },
  fetch
});
```

**Effort:** 1 day

---

#### #6 - –û–±–Ω–æ–≤–∏—Ç—å AppHeader.svelte

**–§–∞–π–ª:** `packages/frontend/src/lib/components/AppHeader.svelte`

```svelte
<script lang="ts">
  import { page } from '$app/stores';
  import { useAuth } from '$lib/auth';
  import { goto } from '$app/navigation';
  import { t } from '$lib/utils/i18n';
  import LanguageSwitcher from './LanguageSwitcher.svelte';

  const auth = useAuth();
  let currentPath = $derived($page.url.pathname);

  // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ layout
  const trans = $derived($page.data.globalTranslations || {});

  async function handleLogout() {
    await auth.logout();
    goto('/login');
  }

  function isActive(path: string): boolean {
    return currentPath === path;
  }
</script>

<nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16">
      <div class="flex items-center space-x-8">
        <a href={auth.isAuthenticated ? '/dashboard' : '/'} class="text-2xl font-bold text-indigo-600">
          Multipult
        </a>

        {#if auth.isAuthenticated}
          <div class="hidden md:flex space-x-1">
            <a href="/dashboard" class="{isActive('/dashboard') ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300'} px-3 py-2 text-sm font-medium border-b-2 transition-colors">
              {t(trans, 'ui.nav.dashboard', 'Dashboard')}
            </a>
            <a href="/concepts" class="{isActive('/concepts') ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300'} px-3 py-2 text-sm font-medium border-b-2 transition-colors">
              {t(trans, 'ui.nav.concepts', 'Concepts')}
            </a>
            <a href="/languages" class="{isActive('/languages') ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300'} px-3 py-2 text-sm font-medium border-b-2 transition-colors">
              {t(trans, 'ui.nav.languages', 'Languages')}
            </a>
            <a href="/dictionaries" class="{isActive('/dictionaries') ? 'border-indigo-600 text-indigo-600' : 'border-transparent text-gray-700 hover:text-gray-900 hover:border-gray-300'} px-3 py-2 text-sm font-medium border-b-2 transition-colors">
              {t(trans, 'ui.nav.dictionaries', 'Dictionaries')}
            </a>
          </div>
        {/if}
      </div>

      <div class="flex items-center space-x-4">
        <LanguageSwitcher />

        {#if auth.isAuthenticated}
          <div class="flex items-center space-x-3">
            <div class="text-right hidden sm:block">
              <p class="text-sm font-medium text-gray-900">{auth.user?.username}</p>
              <p class="text-xs text-gray-500">{auth.user?.email}</p>
            </div>

            <div class="h-10 w-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-medium">
              {auth.user?.username?.charAt(0).toUpperCase()}
            </div>
          </div>

          <button onclick={handleLogout} class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors">
            {t(trans, 'ui.button.logout', 'Logout')}
          </button>
        {:else}
          <a href="/login" class="px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition-colors">
            {t(trans, 'ui.button.signIn', 'Sign in')}
          </a>
          <a href="/register" class="px-6 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 shadow-sm hover:shadow-md transition-all">
            {t(trans, 'ui.button.getStarted', 'Get Started')}
          </a>
        {/if}
      </div>
    </div>
  </div>
</nav>
```

**Effort:** 0.5 day

---

### Phase 3: Update Pages (1 week)

#### #7 - Home Page

**–§–∞–π–ª:** `packages/frontend/src/routes/+page.ts`

```typescript
import { GetUITranslations } from '$houdini';
import { languageStore } from '$lib/stores/languageStore.svelte';
import { dictionariesToMap } from '$lib/utils/i18n';
import type { PageLoad } from './$types';

export const load: PageLoad = async ({ fetch, parent }) => {
  const { globalTranslations } = await parent();
  const languageId = languageStore.currentLanguageId || 1;

  const result = await GetUITranslations.fetch({
    variables: {
      languageId,
      conceptPath: '/ui/home'
    },
    fetch
  });

  const homeTranslations = dictionariesToMap(result.data?.dictionaries || []);

  return {
    homeTranslations,
    globalTranslations
  };
};
```

**–§–∞–π–ª:** `packages/frontend/src/routes/+page.svelte`

```svelte
<script lang="ts">
  import { page } from '$app/stores';
  import { useAuth } from '$lib/auth';
  import { goto } from '$app/navigation';
  import { t } from '$lib/utils/i18n';
  import { onMount } from 'svelte';

  const auth = useAuth();
  const trans = $derived($page.data.homeTranslations || {});

  onMount(() => {
    if (auth.isAuthenticated) {
      goto('/dashboard');
    }
  });
</script>

<svelte:head>
  <title>{t(trans, 'ui.home.title', 'Multipult - Multilingual Content Management')}</title>
</svelte:head>

<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
    <div class="text-center">
      <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-6">
        {t(trans, 'ui.home.title', 'Multilingual Content')}
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600">
          {t(trans, 'ui.home.subtitle', 'Management')}
        </span>
      </h1>

      <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
        {t(trans, 'ui.home.description', 'Organize concepts, manage dictionaries, and handle multilingual content with ease.')}
      </p>

      <!-- –û—Å—Ç–∞–ª—å–Ω–æ–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ t() -->
    </div>
  </div>
</div>
```

**Effort:** 1 day

---

#### #8 - –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –∏–∑ #7 –¥–ª—è:
- [ ] Dashboard (`/ui/dashboard`)
- [ ] Concepts (`/ui/concepts`)
- [ ] Languages (`/ui/languages`)
- [ ] Dictionaries (`/ui/dictionaries`)
- [ ] Login (`/ui/auth/login`)
- [ ] Register (`/ui/auth/register`)
- [ ] Forgot Password (`/ui/auth/forgotPassword`)

–î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
1. –°–æ–∑–¥–∞—Ç—å `+page.ts` —Å load function
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ `GetUITranslations` —Å –Ω—É–∂–Ω—ã–º `conceptPath`
3. –û–±–Ω–æ–≤–∏—Ç—å `+page.svelte` –∑–∞–º–µ–Ω–∏–≤ hardcoded —Ç–µ–∫—Å—Ç—ã –Ω–∞ `t(trans, key, fallback)`

**Effort:** 2-3 days

---

### Phase 4: –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ (1 day)

#### #9 - Auto-reload –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ `LanguageSwitcher` —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `invalidateAll()` –∏–∑ SvelteKit.

**–û–±–Ω–æ–≤–∏—Ç—å:** `packages/frontend/src/lib/stores/languageStore.svelte.ts`

```typescript
import { invalidateAll } from '$app/navigation';

class LanguageStore {
  private _currentLanguageId = $state<number | null>(null);

  get currentLanguageId(): number | null {
    return this._currentLanguageId;
  }

  setLanguage(languageId: number | null): void {
    this._currentLanguageId = languageId;

    if (typeof window !== 'undefined') {
      if (languageId !== null) {
        localStorage.setItem(STORAGE_KEY, languageId.toString());
      } else {
        localStorage.removeItem(STORAGE_KEY);
      }

      // NEW: Invalidate all load functions to reload translations
      invalidateAll();
    }
  }

  // ... rest
}
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$effect` –≤ layout:

```typescript
// –í +layout.svelte
$effect(() => {
  const langId = languageStore.currentLanguageId;
  if (langId && typeof window !== 'undefined') {
    invalidateAll();
  }
});
```

**Effort:** 0.5 day

---

## üìä Summary

### Total Effort:
- **Phase 1 (Backend):** 1-1.5 days
- **Phase 2 (Frontend Core):** 2.5 days
- **Phase 3 (Update Pages):** 3-4 days
- **Phase 4 (Reactivity):** 0.5 day

**Total: 7-9 days (1.5-2 weeks) –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞**

---

## Checklist –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Backend:
- [ ] Seed data —Å–æ–∑–¥–∞–µ—Ç UI-–∫–æ–Ω—Ü–µ–ø—Ç—ã —Å –ø—É—Ç—è–º–∏ `/ui/...`
- [ ] Dictionary –∑–∞–ø–∏—Å–∏ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è EN, RU, ES
- [ ] GraphQL query `dictionaries` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `conceptPathPrefix` —Ä–∞–±–æ—Ç–∞–µ—Ç

### Frontend:
- [ ] –ü–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] Header –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–≤–æ–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–≤–æ–¥—ã
- [ ] Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª—é—á –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω)
- [ ] –ü—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### E2E:
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–∞–π—Ç ‚Üí –≤–∏–¥–∏—Ç EN –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] –ú–µ–Ω—è–µ—Ç —è–∑—ã–∫ –Ω–∞ RU ‚Üí –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Ä—É—Å—Å–∫–∏–π
- [ ] –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ ‚Üí –ø–µ—Ä–µ–≤–æ–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] –ù–µ—Ç hardcoded —Ç–µ–∫—Å—Ç–æ–≤ –≤ UI

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

‚úÖ **–ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
‚úÖ **–ù–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü** - Dictionary —É–∂–µ –µ—Å—Ç—å
‚úÖ **SvelteKit-native** - load functions, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π data flow
‚úÖ **Type-safe** - Houdini –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç TypeScript —Ç–∏–ø—ã
‚úÖ **–ü—Ä–æ—Å—Ç–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (–ë–î)
‚úÖ **–õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è** - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥ = –¥–æ–±–∞–≤–∏—Ç—å Dictionary –∑–∞–ø–∏—Å—å

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (optional enhancements)

- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis –Ω–∞ backend, localStorage –Ω–∞ frontend
- [ ] **Admin UI:** –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] **CLI:** –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ JSON/CSV
- [ ] **–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:** `t(trans, 'ui.greeting', { name: 'John' })` ‚Üí "Hello, John!"
- [ ] **–ü–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏—è:** `tn(trans, 'ui.items', count)` ‚Üí "1 item" / "2 items"

---

**–í—ã–≤–æ–¥:** –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ! –í—ã –±—ã–ª–∏ –ø—Ä–∞–≤—ã. üéâ
