# Парсер онтологии аттракторов человеческого организма

Данный проект представляет собой инструмент для преобразования иерархических данных из текстового формата в структурированный JSON, с сохранением количественных характеристик каждого элемента.

## Структура проекта

```
D:\2025\human_ontology_parser\
├── parser.py         # Основной скрипт для парсинга
├── source.txt        # Входной файл с иерархическими данными
└── output.json       # Результат парсинга в формате JSON
```

## Описание входных данных (source.txt)

Входной файл содержит иерархическую структуру данных об аттракторах человеческого организма, с количественными характеристиками. Структура данных организована в виде дерева, где:

- Каждый элемент имеет уникальный идентификатор в формате `n.m.k` (например, `1.1.1`)
- Имя элемента описывает его функциональное назначение
- В круглых скобках в конце указывается диапазон количественных характеристик (например, `300-350`)

Пример структуры:
```
1. Точечные аттракторы (всего: 4000-5000)
1.1. Молекулярный уровень (1600-2000)
1.1.1. Концентрационные аттракторы (900-1100)
```

## Описание выходных данных (output.json)

Результат парсинга сохраняется в формате JSON, где каждый элемент описывается следующими полями:

- `id`: уникальный идентификатор элемента в нотации с точками (например, `"1.1.1."`)
- `name`: название/описание элемента (без количественных характеристик в круглых скобках)
- `characteristic`: объект, содержащий минимальное и максимальное значения количественной характеристики, или `null`, если таковой нет
  - `min`: минимальное значение диапазона
  - `max`: максимальное значение диапазона
- `children`: массив дочерних элементов (может быть пустым)

Пример структуры JSON:
```json
{
  "id": "1.1.1.",
  "name": "Концентрационные аттракторы",
  "characteristic": {
    "min": 900,
    "max": 1100
  },
  "children": [
    {
      "id": "1.1.1.1.",
      "name": "Энергетические концентрационные аттракторы",
      "characteristic": {
        "min": 300,
        "max": 350
      },
      "children": [...]
    }
  ]
}
```

## Структура таблицы для output.json

Если данные из `output.json` преобразовать в табличную форму, поля таблицы будут следующими:

| Поле | Тип | Описание |
|------|-----|----------|
| id | Строка | Уникальный идентификатор элемента в иерархии |
| name | Строка | Наименование элемента онтологии |
| characteristic_min | Целое число / NULL | Минимальное значение количественной характеристики |
| characteristic_max | Целое число / NULL | Максимальное значение количественной характеристики |
| characteristic | Объект / NULL | Объект, содержащий min и max значения, или null если характеристики нет |
| children | Массив | Массив дочерних элементов (вложенные элементы в иерархии) |

Альтернативно, для плоской таблицы можно использовать следующие поля, чтобы учесть иерархию через родительские связи:

| Поле | Тип | Описание |
|------|-----|----------|
| id | Строка | Уникальный идентификатор элемента |
| parent_id | Строка / NULL | Идентификатор родительского элемента |
| name | Строка | Наименование элемента |
| level | Целое число | Уровень вложенности в иерархии (0 - корневой элемент) |
| characteristic_min | Целое число / NULL | Минимальное значение характеристики |
| characteristic_max | Целое число / NULL | Максимальное значение характеристики |

## Как работает парсер

1. Скрипт читает файл `source.txt` построчно
2. Для каждой строки использует регулярное выражение для извлечения:
   - Идентификатора (все, что до первого пробела)
   - Наименования (все между идентификатором и скобками)
   - Числовых характеристик в скобках (если присутствуют)
3. Строит иерархическую структуру на основе идентификаторов
4. Сохраняет результат в файл `output.json` в формате древовидной структуры

## Запуск парсера

Парсер запускается просто выполнением скрипта:
```bash
python parser.py
```

После выполнения будет создан или перезаписан файл `output.json` с результатами парсинга.